<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="../css/reveal.css">
    <link rel="stylesheet" href="../css/theme/tdd.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="../lib/css/atom-one-dark.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? '../css/print/pdf.css' : '../css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section class="deck-slide" data-background="#E5F3F9">
            <h1>TDD</h1>
            <h3>Test Driven Development</h3>
        </section>
        <section class="about-slide">
            <h2>Über uns</h2>
            <div>
                <div class="about">
                    <img class="profile" width="250" height="250" alt="Marius" src="../img/marius.png">
                    <h3>Marius Reusch</h3>
                    <h3><a href="">Software Engineer @ Zühlke</a></h3>
                    <img height="90px" src="../img/zuehlke.png">
                </div>
                <div class="about">
                    <img class="profile" width="250" height="250" alt="Joachim" src="../img/joachim.jpg">
                    <h3>Joachim Prinzbach</h3>
                    <h3><a href="">Software Engineer @ Baloise</a></h3>
                    <img height="90px" src="../img/baloise.png">
                </div>
            </div>
        </section>
        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h2><span></span>Einstieg als<span></span></h2>
                <h1>Software Engineer</h1>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Share Knowledge</h1>
                <h2><span></span>es bringt dich selbst weiter<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Häufiges Feedback</h1>
                <h2><span></span>Von anderen, für andere<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Team</h1>
                <h2><span></span>toll ein anderer...<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>mut</h1>
                <h2><span></span>ausprobieren & experimentieren<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Durst</h1>
                <h2><span></span>nach Wissen<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Pairing</h1>
                <h2><span></span>und Code Reviews<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Agile</h1>
                <h2><span></span>Scrum und so<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>CI / CD</h1>
                <h2><span></span>Alles automatisiert - und continuous<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Qualität</h1>
                <h2><span></span>Clean Code & Refactoring<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>VCS</h1>
                <h2><span></span>GIT oder SVN - hab es unter Kontrolle<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Shortcuts</h1>
                <h2><span></span>learn the f***ing shortcuts!<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Testing</h1>
                <h2><span></span>und vor allem: TDD<span></span></h2>
            </section>
            <section>
                <h2>Recap</h2>
                <ul>
                    <li>Automatisierung</li>
                    <li>Pairing und Teamwork</li>
                    <li>Tools im Griff haben</li>
                    <li>Testing</li>
                    <li>sich weiterentwickeln</li>
                </ul>
            </section>
        </section>
        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Testing Allgemein</h1>
                <h2><span></span>Grundlagen und Argumente<span></span></h2>
            </section>
            <section>
                <img src="../img/bugs.jpg" alt="">
            </section>
            <section>
                <h3>Warum Testing? Warum Automatisierung?</h3>
                <ul>
                    <li>Was einmal lief soll nicht wieder kaputt gehen</li>
                    <li>Testing ist Bestandteil professioneller Software Entwicklung</li>
                    <li>Ein Feature läuft nur dann, wenn es getestet ist</li>
                    <li>manuelles Ausführen von repetitiven Tägigkeiten ist...</li>
                </ul>
            </section>
            <section>
                <h3>L A N G W E I L I G</h3>
                <img src="../img/boah-watt-is-datt-langweilig-daec37f6-484a-4e5c-aa3a-2d19d0ffd42d.jpg" alt="" width="55%">
            </section>
            <section>
                <h3>Testing spart Geld</h3>
                <img src="../img/bugs-prices.png" width="130%">
            </section>
            <section>
                <h3>Testing Pyramide</h3>
                <img src="../img/pyramide.png">
            </section>
            <section>
                <h3>Testing Pyramide (Theorie)</h3>
                <ul>
                    <li><span class="warn">Integration Tests</span> testen das Zusammenspiel mehrerer Teile und externer
                        Ressourcen (z.B. Datenbank)
                    </li>
                    <li><span class="warn">UI Tests</span> testen den View Layer, werden nicht mit dem realen Backend
                        ausgeführt
                    </li>
                    <li><span class="warn">E2E Tests</span> testen die Applikation vom UI bis zur Datenbank, in einem
                        Benutzer-Flow
                    </li>
                    <li><span class="warn">Manual Tests</span> werden von Testern oder Benutzern manuell durchgeführt
                    </li>
                </ul>
            </section>
            <section>
                <h3>Unit Tests</h3>
                <ul>
                    <li>testen eine Unit of Work: eine Klasse, oder auch mehrere Klassen als Verbund</li>
                    <li>sind sehr schnell und automatisch ausführbar - werden vor jedem Commit ausgeführt</li>
                    <li>werden rein in memory ausgeführt, kein Zugriff auf Dateisystem oder Datenbank</li>
                    <li>werden von den Entwicklern mit den gewohnten Tools (und einer Unit-Testing Library)
                        geschrieben
                    </li>
                </ul>
            </section>
            <section>
                <h3>JUnit</h3>
                <ul>
                    <li>JUnit ist ein Unit-Test Framework</li>
                    <li>ursprünglich von Kent Beck und Erich Gamma entwickelt</li>
                    <li>bietet eine API zum Annotieren von Tests: <span class="code">@Test</span></li>
                    <li>bietet statische Methoden um die Ergebnisse mit den Erwartungen zu überprüfen: <span
                            class="code">org.junit.Assert.*</span></li>
                    <li>ist Open Source und kostenlos verfügbar: <a href="http://junit.org/junit4/">JUnit
                        Projektseite</a></li>
                </ul>
            </section>
        </section>

        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>TDD</h1>
                <h2><span></span>Das wichtigste in Kürze<span></span></h2>
            </section>
            <section>
                <h3>Ursprung</h3>
                <div style="display: flex;">
                    <div style="flex: 1;">
                        <img height="250" src="../img/kentbeck.jpg">
                        <div>Kent Beck</div>
                    </div>
                    <div style="flex: 1;">
                        <img height="250" src="../img/agile.jpg">
                        <div>Agile Movement</div>
                    </div>
                </div>
                <aside class="notes">
                    How does TDD relate to XP
                    <ul>
                        <li>Pairing</li>
                        <li>Refactoring</li>
                        <li></li>
                    </ul>
                </aside>
            </section>
            <section>
                <h3>Was ist die grundlegende Vorgehensweise bei TDD?</h3>
            </section>
            <section>
                <h3>Write tests first!</h3>
            </section>
            <section>
                <img src="../img/whaaat.gif">
            </section>
            <section>
                <h3>Aber ich habe doch noch gar keine Klassen oder Methoden oder sonst irgendwas. Arbeite ich mit diesen
                    ganzen rot unterstrichenen Sachen in meiner IDE?</h3>
            </section>
            <section>
                <img src="../img/yes2.gif">
            </section>
            <section>
                <h3>Und warum mache ich sowas?</h3>
                <div style="display: flex;">
                    <div style="flex: 1;">
                        <img height="160" src="../img/fastfeedback.png">
                        <div>Fast Feedback</div>
                    </div>
                    <div style="flex: 1;">
                        <img height="160" src="../img/CodeIsBad.png">
                        <div>No bad code</div>
                    </div>
                    <div style="flex: 1">
                        <img height="160" src="../img/havingfun.jpg">
                        <div>It's fun!</div>
                    </div>
                </div>
            </section>
            <section>
                <h3>Vereinfachter TDD Cycle</h3>
                <img src="../img/simple_tdd_cycle.png">
            </section>
            <section>
                <h3>Drei Möglichkeiten um "grün" zu werden</h3>
                <ul>
                    <li>Fake it</li>
                    <li>Implementiere das Offensichtliche</li>
                    <li>Triangulation</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Fake it: Eigenet sich für komplexere Lösungen und stellt trotzdem konstant sicher,
                            dass einfache Beispiele bei Anpassungen des Algorithmus noch passen. Zudem hat es auch einen psychologischen Effekt, da man trotz
                            des komplexen Problems schnell einen grünen Balken hat.
                        </li>
                        <li>Fake It und Triangulation sind für kleinere Schritte geeignet Mit Obiviuos Implementation mache ich grössere Schritte.</li>
                        <li>Eine fixe Regel existiert nicht! Das Wichtigste ist den Zyklus kurz zu halten.</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h3>Beginne so simpel wie möglich!</h3>
                <ul>
                    <li>Schreibe keinen Code für Anforderungen, die irgendwann mal auftauchen könnten</li>
                    <li><b>Löse dich davon, die Implementation vorauszuahnen</b></li>
                    <li>In erster Linie geht es darum den Test grün zu bekommen (red / green cycle)</li>
                </ul>
            </section>
        </section>

        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Projekt Setup</h1>
                <h2><span></span>Getting your hands dirty<span></span></h2>
            </section>
            <section>
                <h3>Auschecken und dummyTest ausführen</h3>
            </section>
            <section>
                <h3>Maven Projekt Struktur</h3>
                <p>Industrieweiter Standard</p>
                <ul>
                    <li><span class="code">src/main/java</span> => Source Dateien</li>
                    <li><span class="code">src/test/java</span> => Test Dateien</li>
                    <li>Name der Testklasse = Zu testende Klasse + "Test"</li>
                    <li>StringBuilder => StringBuilderTest</li>
                </ul>
            </section>
            <section>
                <h3>Dependencies</h3>
                <ul>
                    <li><span class="code">JUnit</span></li>
                    <li><span class="code">Mockito</span> - Framework um Abhängigkeiten durch eine Mock Implementation
                        zu ersetzen
                    </li>
                </ul>
            </section>
            <section>
                <h3>Failure / Success / Error</h3>
                <ul>
                    <li><span class="code">Grün</span> bedeutet, dass die Testfälle funktionieren, <span class="code">keine unerwarteten Exceptions</span>
                        auftreten und alle <span class="code">Assertions den Erwartungen entsprechen</span></li>
                    <li><span class="warn">Rot</span> bedeutet, dass entweder eine <span class="warn">unerwartete Exception</span>
                        aufgetreten ist (Error) oder eine <span
                                class="warn">Assertion nicht den Erwartungen entspricht</span> (Failure)
                    </li>
                </ul>
            </section>
            <section>
                <h3>@Test</h3>
                <ul>
                    <li>frühere Version: alle Methoden mussten mit test beginnen, die Testklasse musste <span
                            class="code">TestCase</span> erweitern
                    </li>
                    <li>seit JUnit4 werden Test-Methoden mit der <span class="code">@Test</span> Annotation versehen, es
                        muss nicht mehr von <span class="code">TestCase</span> geerbt werden
                    </li>
                    <li>die mit <span class="code">@Test</span> annotierten Methoden müssen <span class="code">public void</span>
                        sein
                    </li>
                </ul>
            </section>
            <section>
                <h3>Assert</h3>
                <ul>
                    <li>überprüfen der Erwartungen</li>
                    <li>ist eine Erwartung nicht korrekt, schlägt ein Test fehl</li>
                    <li><span class="code">Assert.assertEquals(expected, actual);</span></li>
                    <li><span class="code">Assert.assertEquals(message, expected, actual);</span></li>
                </ul>
            </section>
            <section>
                <h3>Ausführen von Tests</h3>
                <h4>Tests können verschieden ausgeführt werden</h4>
                <ul>
                    <li>Alle pro Package</li>
                    <li>Alle pro Klasse</li>
                    <li>ein einzelner Test</li>
                </ul>
            </section>
        </section>

        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Projektvorstellung</h1>
                <h2><span></span>Grade Calculator<span></span></h2>
            </section>
            <section>
                <h3>Anforderungen</h3>
                <ul>
                    <li>Der Calculator soll die Möglichkeitn bieten den Durchschnitt einer beliebigen Anzahl (Notenspiegel) von gewichteten Noten zu berechnen.Das Gewicht der Noten wir durch ECTS repräsentiert.</li>
                    <li>Des Weiteren soll der Calculator den Durchschnitt über eine Menge von Notenspiegeln berechnen können.</li>
                    <li><span class="warn">Vorsicht dieser Anforderungskatalog ist nicht zwingend vollständig bzw. bis ins letzte Detail ausformuliert.</span></li>
                    <li><span class="warn">Wichtig:</span> TDD erfodert das selbständige Unterteilen von Anforderungen in kleine Häppchen</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Restriktionen für ECTS und Noten werden bewusst nicht angegeben.</li>
                        <li>Es dürfen nur gültige Noten die an der HFU bekannt sind in den Rechner reingegeben werden.</li>
                        <li>Stelle sicher, dass nur ganzzahlige Credit Points zwischen 1 und 60 ausgewählt werden können</li>
                        <li>Für heute gehen wir davon aus, dass Noten dann gültig sind wenn sie >= 1.0 und kleiner gleich 5.0 sind</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h3>Test Case Brainstorming</h3>
                <aside class="notes">
                    Tipps zum Vorgehen geben: Denkt eventuell über mögliche Objekte nach!
                </aside>
            </section>
            <section>
                <h3>Ein paar Hinweise</h3>
                <ul>
                    <li>Überprüft eure Vermutungen mit Assertions</li>
                    <li>Überlege dir einen sinnvollen Namen für die Testmethode(n), starte mit möglichst einfachen Testfällen</li>
                </ul>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        @Test
                        public void sinnvollerName() throws Exception {
                            final Person person = new Person("Hans", "Muster");

                            final String fullname = person.getFullname();

                            Assert.assertEquals("Hans Muster", fullname);
                        }
					</code>
                </pre>
            </section>
            <section>
                <h3>Recap</h3>
                <ul>
                    <li>Hat jemand Lust seine Lösung vorzustellen?</li>
                    <li>Wieviele Tests habt ihr geschrieben? Warum?</li>
                    <li>Wieviele <span class="code">Assert Statements</span> habt ihr in einer Testmethode? Warum?</li>
                    <li>Für die nächste Runde überdenkt eure Namen erneut, und schaut ob ihr was ändern wollt.</li>
                </ul>
            </section>
            <section>
                <h3>Recap</h3>
                <ul>
                    <li>Exkurs: Naming Patterns für Testmethoden</li>
                    <li>Wie sind Beispiele für eure Testnamen?</li>
                </ul>
            </section>
            <section>
                <h3>Exkurs: Naming Patterns für Testmethoden</h3>
                <h4>Welches Naming findet ihr am sinnvollsten?</h4>
                <ul>
                    <li>testCalc1</li>
                    <li>oneGrade_calculateAverage_returnsInputGrade</li>
                    <li>calculateAverageOfOneGrade</li>
                    <li>testAverageCalculationForOneGradeAndShouldReturnTheAverageOfThatGrade</li>
                    <li>test_calculate_oneGrade</li>
                </ul>
            </section>
            <section>
                <h3>Exkurs: Naming Patterns und Strukturen für Testmethoden</h3>
                <ul>
                    <li><a href="http://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html">Roy
                        Osherove</a></li>
                    <li><span class="code">methodUnderTest_inputParams_expectedResult</span></li>
                </ul>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        @Test
                        public void getFullName_firstLastName_fullName() {
                            final Person person = new Person("Hans", "Muster");

                            final String fullname = person.getFullname();

                            Assert.assertEquals("Hans Muster", fullname);
                        }
					</code>
                </pre>
            </section>
            <section>
                <h3>Vorteile eines Naming Patterns</h3>
                <ul>
                    <li>Tests der gleichen Unit sind aufgrund des Namens gruppiert</li>
                    <li>ohne den Code zu sehen - es ist schnell klar welches Feature nicht mehr läuft</li>
                    <li>Alle Team Mitglieder folgen einem Schema - neue Mitglieder finden sich schnell zurecht</li>
                </ul>
            </section>
            <section>
                <h3>Recap</h3>
                <ul>
                    <li>Was fällt euch an euren Implementation auf? Ist euer Code clean?</li>
                </ul>
            </section>
            <section>
                <img src="../img/no.gif">
            </section>
            <section>
                <h3>Exkurs: Erweiterung des TDD Cycles</h3>
                <img src="../img/tdd_cycle.png">
                <aside class="notes">
                    <ul>
                        <li>TDD CYCLE</li>
                        <ul>
                            <li>Write a test for the next bit of functionality you want to add.</li>
                            <li>Write the functional code until the test passes.</li>
                            <li>Refactor both new and old code to make it well structured.</li>
                        </ul>
                        <li>Beim Refactoring geht es um viele Clean Code Themen. Wir beschäftigen uns heute vorraning mit der Eliminierung von Duplikaten, der (Nicht)-Verwendung von Primitiven, Feature Envy und Depenedency Injection.</li>
                        <li>Refatcoring MAC Suche</li>
                        <li>Erstelle weitere Testfälle um ein Pattern zu erkennen</li>
                        <li>Führe ein Refactoring durch wenn die Testfälle grün sind</li>
                        <li><span class="warn">Hint:</span> Eventuell bietet es sich an, zusammenhängende Werte in einem Objekt zu kapseln</li>

                    </ul>
                </aside>
            </section>

            <section>
                <h3>Recap</h3>
                <ul>
                    <li>Arrange / Act / Assert</li>
                </ul>
            </section>
            <section>
                <h3>Exkurs: Test Coverage</h3>
                <p>Versuche die Berechnungslogik zu zerstören, ohne dass ein Test bricht.</p>
            </section>
            <section>
                <h3>Exkurs: Test Coverage</h3>
                <h4>Es wird zwischen unterschiedlichen Kennzahlen unterschieden:</h4>
                <ul>
                    <li>Class Coverage</li>
                    <li>Method Coverage</li>
                    <li>Line / Statement Coverage</li>
                    <li>Branch / Decision Coverage</li>
                </ul>
            </section>
            <section>
                <h3>Exkurs: Test Coverage</h3>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                    public class GradePrinter {
                        public boolean isPassed(double grade) {
                            return grade <= 4.0;
                        }

                        public void gradePrinter(double grade) {
                            if (grade <= 4.0) {
                                System.out.println("Passed!");
                            }
                            if (grade == 1.0) {
                                System.out.println("CRAZY!");
                            }
                            System.out.println("Your grade is " + grade);
                        }
                    }
                    </code>
                </pre>
                <aside class="notes">
                    <ul>
                        <li><span class="warn">Vorsicht: </span>Eine hohe Testabdeckung weist nicht automatisch auf eine gute Qualität der Tests und der Applikation hin.</li>
                    </ul>

                </aside>
            </section>

            <section>
                <h3>Exkurs: Primitive Obsession</h3>
                <ul>
                    <li>Besessenheit von primitiven Typen</li>
                    <li><span class="warn">Problem: </span>Viele Kleine Duplikationen und geringe Typ-Sicherheit</li>
                    <li><span class="highlighted">Lösung: </span> Wrapper-Objekte für die primitiven Typen erstellen</li>
                </ul>
            </section>

            <section>
                <h3>Exkurs: Feature Envy</h3>
                <img src="../img/neid.jpg" height="500">
            </section>

            <section>
                <h3>Exkurs: Feature Envy</h3>
                <ul>
                    <li>Feature Neid</li>
                    <li><span class="warn">Problem</span> Hohe Kopplung</li>
                    <li>Feature Envy können auch auf Standard-Klassen wie String, Double, Integer, Collections etc. auftreten</li>
                    <li><span class="highlighted">Lösung:</span> Funktionalität an ein anderes, oder neues Objekt verschieben.</li>
                </ul>
            </section>
            <section>
                <h3>Exkurs: Feature Envy</h3>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                    public String convertToUsFormat(Grade grade){
                        String internationalGrade = "";
                        if (grade.getValue() >= 1.0 && grade.getValue() < 1.7) {
                            internationalGrade = "A";
                        } else if (grade.getValue() >= 1.7 && grade.getValue() < 2.7) {
                            internationalGrade = "B";
                        } else if (grade.getValue() >= 2.7 && grade.getValue() < 3.7) {
                            internationalGrade = "C";
                        } else if (grade.getValue() >= 3.7 && grade.getValue() <= 4.0) {
                            internationalGrade = "D";
                        } else if (grade.getValue() > 4) {
                            internationalGrade = "F";
                        }
                        return internationalGrade;
                    }
                    </code>
                </pre>
            </section>
            <section>
                <h3>Recap TDD: Was muss ich testen?</h3>
                <ul>
                    <li>Schleifen</li>
                    <li>Verzweigungen</li>
                    <li>Operationen</li>
                    <li>Polymorphismus</li>
                    <li>"Write tests until fear is transformed into boredom" (Kent Beck)</li>
                </ul>
            </section>
            <section>
                <h3>Recap TDD: Wie erkenne ich schlechte Tests?</h3>
                <ul>
                    <li>Langer Setup Code</li>
                    <li>Setup Duplication</li>
                    <li>Langlaufende Tests</li>
                    <li>Fragile Tests</li>
                </ul>
            </section>
        </section>

        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Untest-barer Code</h1>
                <h2>Und wie mache ich ihn testbar</h2>
                <aside class="notes">
                    <ul>
                        <li>"And if your static utility methods can call to external services as well, that’s even
                            better!"
                        </li>
                        <li><a href="http://misko.hevery.com/2008/07/24/how-to-write-3v1l-untestable-code/">How To Write
                            3v1l, untestable Code</a></li>
                        <li>Es gibt unzählige Beispiele für schlechten Code, wir haben mal ein paar Beispiele rausgesucht.</li>
                        <li>Beispiel A: Create your own dependencies</li>
                        <li>Beispiel B: Das Validieren einer Note an in mehrere Methoden macht es schwieriger diese Methoden zu Testen und theoretisch müsste die Gültigkeit einer Note für jede Methode neu getestet werden.</li>
                    </ul>
                </aside>
            </section>

            <section>
                <h2>Dependencies</h2>
                <ul>
                    <li>Abhängigkeiten sind die Hauptursache für schwer testbaren Code</li>
                    <li>vor allem Abhängigkeiten, die von der zu testenden Klasse selbst erstellt werden</li>
                </ul>
            </section>

            <section>
                <p><span class="quote">"Dependency Injection is a 25-dollar term for a 5-cent concept."</span></p>
                <p><span class="author">James Shore</span></p>
            </section>

            <section>
                <h2>How does it work?</h2>
                <img src="../img/magic.jpg" width="75%" alt="">
            </section>

            <section>
                <p><span class="quote">"Dependency injection means giving an object its instance variables. Really. That's it."</span>
                </p>
                <p><span class="author">James Shore</span></p>
            </section>

            <section>
                <h2>Constructor Injection</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        public class SomeClass {
                            private Dependency dependency;
                            public SomeClass(Dependency dependency) {
                                this.dependency = dependency;
                            }
                        }
					</code>
                    <code class="hljs java" data-trim contenteditable>
                        Dependecy dependency = new Dependency();
                        SomeClass clazz = new SomeClass(dependency);
					</code>
                </pre>
            </section>
            <section>
                <h2>Setter Injection</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        public class SomeClass {
                            private Dependency dependency;
                            public void setDependency(Dependency dependency) {
                                this.dependency = dependency;
                            }
                        }
					</code>
                    <code class="hljs java" data-trim contenteditable>
                        Dependecy dependency = new Dependency();
                        SomeClass clazz = new SomeClass();
                        clazz.setDependency(dependency);
					</code>
                </pre>
            </section>
            <section>
                <h2>Interface Injection</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        public class SomeClass implements DepInjectable{
                            private Dependency dependency;
                            @Override
                            public void injectDep(Dependency dependency) {
                                this.dependency = dependency;
                            }
                        }

                        interface DepInjectable {
                            void injectDep(Dependency dependency);
                        }
					</code>
                    <code class="hljs java" data-trim contenteditable>
                        Dependecy dependency = new Dependency();
                        SomeClass clazz = new SomeClass();
                        clazz.setDependency(dependency);
					</code>
                </pre>
            </section>
            <section>
                <h2>JEE CDI & Spring DI</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        public class SomeClass {
                            @Inject
                            private Dependency dependency;
                        }
					</code>
                    <code class="hljs java" data-trim contenteditable>
                        public class SomeClass {
                            private Dependency dependency;

                            @Autowired
                            public void setDependency(Dependency dependency) {
                                this.dependency = dependency;
                            }
                        }
					</code>
                </pre>
            </section>
            <section>
                <h2>Was genau hilft uns das beim Testing?</h2>
                <ul>
                    <li>Dependencies können im Test ausgetauscht werden</li>
                    <li>Anstelle der echten Abhängigkeit, kann dem Object under Test eine Alternative untergejubelt
                        werden
                    </li>
                    <li>Es gibt mehrere Formen solche Alternativen zu erstellen. Sie werden alle als <span class="code">Test Double</span>
                        bezeichnet
                    </li>
                </ul>
            </section>
            <section>
                <h2>Dummy Object</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        public interface FileReader {
                            String read(File file);
                        }
					</code>
                    <code class="hljs java" data-trim contenteditable>
                        @Test
                        public void importCustomerData() {
                            FileReader reader = new FileReader() {
                                @Override
                                public String read(File file) {
                                    return null;
                                }
                            };
                            new CustomerImport(reader);
                            // ...
                        }
					</code>
                </pre>
            </section>
            <section>
                <h2>Dummy Object (2)</h2>
                <ul>
                    <li>ein möglichst einfaches Objekt als Parameter nutzen</li>
                    <li>im einfachsten Fall <span class="code">null</span></li>
                    <li>Wird ein Objekt benötigt, die simpelste Form der Implementierung des Interfaces wählen</li>
                    <li>Dummies werden nicht aufgerufen, sie werden lediglich für eine vollständige Liste der Parameter
                        benötigt
                    </li>
                </ul>
            </section>
            <section>
                <h2>Fake</h2>
                <ul>
                    <li>bieten eine funktionierende Implementation</li>
                    <li>decken nicht alles ab</li>
                    <li>nicht für die Produktion nutzbar</li>
                    <li>Bspw. eine In-Memory-Datenbank</li>
                </ul>
            </section>
            <section>
                <h2>Test Stub</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        @Test
                        public void calculateShippingTime_productInStore() {
                            ProductService prService = new ProductService() {

                                @Override
                                public boolean isProductInStore() {
                                    return true;
                                }
                            };

                            int days = new ShippingService(prService)
                                .getShippingTime();

                            assertEquals(2, days);
                        }
					</code>
                </pre>
            </section>
            <section>
                <h2>Test Stub (2)</h2>
                <ul>
                    <li>ähnlich zum Dummy - wird aber aufgerufen</li>
                    <li>es wird hart ein Wert zurückgegeben</li>
                    <li>die reale Implemementation wird überschrieben</li>
                </ul>
            </section>
            <section>
                <h2>Test Spy</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        new EmailService() {
                            int callCount = 0;
                            String lastCallParam = null;

                            @Override
                            public void sendMail(String msg) {
                                this.callCount++;
                                this.lastCallParam = msg;
                            }
                            public int getCallCount() {
                                return this.callCount;
                            }
                            public String getLastCallParam() {
                                return this.lastCallParam;
                            }
                        };
					</code>
                </pre>
            </section>
            <section>
                <h2>Test Spy (2)</h2>
                <ul>
                    <li>ist ein Stub der zusätzliche Informationen über die Aufrufe bereitstellt</li>
                    <li>er kann auch die reale Implementierung aufrufen <span class="code">super.call();</span></li>
                    <li>die Anzahl der Aufrufe, ob eine Methode überhaupt aufgerufen wurde oder auch die Argumente
                        können überprüft werden
                    </li>
                </ul>
            </section>
            <section>
                <h2>Mock</h2>
                <ul>
                    <li>ist der mächtigste Vertreter der Test Doubles</li>
                    <li>es wird definiert, was beim Aufruf von Methoden zurückgegeben werden soll</li>
                    <li>es kann eine Vielzahl von Überprüfungen auf dem Mock vorgenommen werden</li>
                    <li>Für das Mocking ist ein Framework notwendig</li>
                    <li>Für Java gibt es <a href="http://site.mockito.org/">Mockito</a>, <a href="http://easymock.org/">EasyMock</a>,
                        <a href="http://jmockit.org/">JMockit</a> und <a href="http://powermock.github.io/">PowerMock</a></li>
                </ul>
            </section>
            <section>
                <h2>Mockito</h2>
                <ul>
                    <li>ist in der Industrie am verbreitesten</li>
                    <li>hat aus unserer Sicht die angenehmste API</li>
                    <li>wir raten beim Einsatz eines Mocking-Frameworks für Java zu Mockito</li>
                </ul>
            </section>
            <section>
                <h2>Mocking mit Mockito</h2>
                <pre>
                    <code class="hljs java" data-trim contenteditable>
                        @Test
                        public void email_withMockito() throws Exception {
                            EmailService emailServiceMock = Mockito
                                .mock(EmailService.class);
                            Mockito.when(emailServiceMock.sendMail("Text"))
                                .thenReturn("Antwort");

                            String resp = emailServiceMock.sendMail("Text");

                            Assert.assertEquals("Antwort", resp);
                            Mockito.verify(emailServiceMock, Mockito.times(1))
                                .sendMail("Text");
                        }
					</code>
                </pre>
            </section>
            <section>
                <h2>Mocking allgemein</h2>
                <ul>
                    <li>Mocking sollte nur sehr dosiert eingesetzt werden</li>
                    <li>Tests mit Mock-Unterstützung sind langsamer</li>
                    <li>Die Lesbarkeit kann schnell leiden</li>
                    <li>Objekte die einfach zu erstellen und zu kontrollieren sind sollten nicht gemocked werden</li>
                    <li>Mocking bietet sich vor allem für Abhängigkeiten an, die auf das Dateisystem, die Datenbank oder andere Systeme zugreifen</li>
                </ul>
            </section>
        </section>

        <section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h1>Wrap Up</h1>
                <h2><span></span>TDD<span></span></h2>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h3>Ein paar Gedanken zu TDD</h3>
                <ul>
                    <li>Seid pragamatisch!</li>
                    <li>TDD is nicht immer sinnvoll.</li>
                </ul>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h3>Gute Quellen zum Nachschlagen / Ausprobieren (1/2)</h3>
                <ul>
                    <li><a href="https://www.codewars.com/users/sign_in">Codewars</a></li>
                    <li><a href="https://de.udacity.com/">Udacity</a></li>
                    <li><a href="http://www.frankwestphal.de/ftp/Westphal_Testgetriebene_Entwicklung.pdf">Frank Westphal
                        - Testgetriebene Entwicklung</a></li>
                    <li><a href="https://martinfowler.com/bliki/ParallelChange.html">Danilo Sato - Parallel Change
                        (martinfowler.com/)</a></li>
                    <li><a href="https://sourcemaking.com/refactoring">Code Smells and Refactoring Techniques</a></li>
                </ul>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h3>Gute Quellen zum Nachschlagen / Ausprobieren (2/2)</h3>
                <ul>
                    <li><a href="https://www.thoughtworks.com/de/insights/blog/composition-vs-inheritance-how-choose">Composition
                        vs. Inheritance</a></li>
                    <li><a href="http://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html">Naming Standard
                        for Unit Tests nach Osherove</a></li>
                    <li><a href="https://www.youtube.com/watch?v=qkblc5WRn-U">Rober C. Marting - Three laws of TDD</a>
                    </li>
                    <li><a href="http://misko.hevery.com/2008/07/24/how-to-write-3v1l-untestable-code/">How to Write
                        3v1L, Untestable Code</a></li>
                    <li>
                        Spotify Engineerung Culture
                        <a href="https://labs.spotify.com/2014/03/27/spotify-engineering-culture-part-1/">Part 1, </a>
                        <a href="https://labs.spotify.com/2014/09/20/spotify-engineering-culture-part-2/">Part 2</a>
                    </li>
                </ul>
            </section>
            <section class="sub-section-slide" data-background="#E5F3F9">
                <h3>Literatur Empfehlungen</h3>
                <ul>
                    <li>Frank Westphal: <span class="highlighted">"Testgetriebene Entwickung mit JUnit & FIT: Wie Software änderbar bleibt"</span>
                    </li>
                    <li>Kent Beck: <span class="highlighted">"Test Driven Development: By Example"</span></li>
                    <li>Robert C. Martin: <span class="highlighted">"Clean Code - Refactoring, Patterns, Testen und Techniken für sauberen Code"</span>
                    </li>
                    <li>Eric Evans: <span class="highlighted">"Domain-Driven Design: Tackling Complexity in the Heart of Software"</span>
                    </li>
                </ul>
            </section>
            <section>
                <h3>Contact</h3>
                <ul>
                    <li>Joachim Prinzbach</li>
                    <ul>
                        <li>E-Mail: joachim.prinzbach@gmail.com</li>
                        <li><a href="https://www.xing.com/profile/Joachim_Prinzbach">XING</a></li>
                    </ul>
                    <li>Marius Reusch</li>
                    <ul>
                        <li>E-Mail: marius.reusch@gmail.com</li>
                        <li><a href="https://www.xing.com/profile/Marius_Reusch">XING</a></li>
                    </ul>
                </ul>
            </section>
        </section>

    </div>
</div>

<script src="../lib/js/head.min.js"></script>
<script src="../js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,
        pubnubRemoteControl: {
            subscribeKey: 'sub-c-2e12c108-13db-11e7-aca9-02ee2ddab7fe',
            publishKey: 'pub-c-59089c7e-6675-454c-9fc4-32a1ecdfad51',
            inputChannel: 'input',
            outputChannel: 'output'
        },

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            {src: '../plugin/markdown/marked.js'},
            {src: '../plugin/markdown/markdown.js'},
            {src: 'https://cdn.pubnub.com/sdk/javascript/pubnub.4.4.0.min.js', async: true},
            {src: '../plugin/pubnub-remote-control/pubnub-remote-control.js', async: true},
            {src: '../plugin/notes/notes.js', async: true},
            {
                src: '../plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            }
        ]
    });
</script>
</body>
</html>
